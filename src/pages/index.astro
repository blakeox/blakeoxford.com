---
import Layout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
const projects = (await getCollection('projects')) as any[];
const featuredProjects = projects
  .filter((p: any) => !p.data.draft)
  .sort((a: any, b: any) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 3);
---
<Layout title="Welcome to My Portfolio" description="Explore my projects, blog posts, and get in touch with me.">
  <!-- Decorative background shapes -->
  <div class="fixed inset-0 -z-10 pointer-events-none">
    <div class="absolute top-0 left-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2"></div>
    <div class="absolute bottom-0 right-0 w-80 h-80 bg-accent/20 rounded-full blur-3xl translate-x-1/3 translate-y-1/3"></div>
  </div>
  <!-- Skip to main content for accessibility -->
  <a href="#main-content" class="sr-only focus:not-sr-only absolute top-4 left-4 bg-accent text-background font-semibold px-4 py-2 rounded transition">Skip to main content</a>

  <main id="main-content" aria-label="Main Content" tabindex="-1" class="space-y-20">
    <!-- Hero Section -->
    <section class="c-hero w-screen min-h-[90vh] flex flex-col justify-start relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] bg-gradient-to-br from-accent/10 to-background dark:from-accent/20 dark:to-gray-900 py-2 md:py-4 rounded-2xl shadow-xl animate-fade-in"
      role="banner" aria-label="Site introduction and welcome">
      <div class="flex flex-col items-center gap-6 md:gap-10 px-2 sm:px-4 w-full max-w-none">
        <img src="/assets/images/Blake-O-scaled.jpg" alt="Blake Oxford" class="w-28 h-28 sm:w-36 sm:h-36 md:w-44 md:h-44 rounded-full object-cover shadow-2xl border-4 border-accent animate-fade-in animate-bounce-y mb-2 md:mb-4" loading="lazy" />
        <div class="animate-slide-up text-center flex flex-col justify-center">
          <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold mb-2 md:mb-3 text-accent-dark animate-fade-in">Welcome to My Portfolio</h1>
          <p class="text-base sm:text-lg md:text-lg mb-3 md:mb-4 text-gray-700 dark:text-gray-200">
            Hi, I'm <span class="font-bold text-accent text-lg md:text-xl">Blake Oxford</span> ‚Äî a leader in IT and business transformation. I bridge the gap between technology and strategy to drive efficiency, scale operations, and empower teams. Explore my work, insights, and let‚Äôs connect!
          </p>
          <a href="/about/" class="mx-auto inline-flex items-center justify-center bg-accent text-background font-semibold px-4 sm:px-5 py-1.5 sm:py-2 rounded-lg shadow hover:bg-accent-dark transition-all duration-200 text-sm sm:text-base animate-fade-in" data-analytics="hero-cta">Learn More About Me</a>
        </div>
      </div>
      {/* Decorative SVG wave divider */}
      <div aria-hidden="true" class="absolute left-0 right-0 bottom-0 w-full overflow-hidden pointer-events-none" style="line-height:0">
        <svg viewBox="0 0 1440 80" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full h-16 md:h-20 lg:h-24">
          <path fill="currentColor" fill-opacity="0.08" d="M0,32 C360,80 1080,0 1440,48 L1440,80 L0,80 Z" />
        </svg>
      </div>
      {/* Scroll Down Indicator */}
      <button type="button" class="absolute left-1/2 -translate-x-1/2 bottom-4 flex flex-col items-center animate-bounce-y z-10 focus:outline-none" aria-label="Scroll down" onclick="document.getElementById('featured-projects').scrollIntoView({ behavior: 'smooth', block: 'start' })">
        <span class="text-sm text-accent-dark mb-1">Scroll Down</span>
        <svg class="w-6 h-6 text-accent-dark" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
    </section>

    <!-- Featured Projects Section -->
    <section id="featured-projects" class="c-featured-projects container mx-auto px-4" aria-labelledby="featured-projects">
      <h2 id="featured-projects" class="text-3xl font-bold mb-8 text-accent-dark animate-fade-in">Featured Projects</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {featuredProjects.map((project: any) => (
          <div class="bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-xl flex flex-col group hover:scale-[1.03] hover:shadow-2xl transition-all duration-200 animate-slide-up">
            <a href={`/projects/${project.slug}/`} class="block mb-4 rounded-xl overflow-hidden">
              <img
                src={project.data.image || '/assets/images/default-project.png'}
                alt={project.data.title}
                class="rounded-xl group-hover:scale-105 transition-transform duration-200"
                loading="lazy"
              />
            </a>
            <h3 class="text-xl font-bold mb-2 text-accent-dark flex items-center gap-2">
              <a href={`/projects/${project.slug}/`} class="hover:underline">
                {project.data.title}
              </a>
              <span class="inline-block bg-accent-light text-accent-dark text-xs font-semibold px-2 py-1 rounded">Featured</span>
            </h3>
            {project.data.description && (
              <p class="flex-grow text-gray-700 dark:text-gray-300 mb-4">{project.data.description}</p>
            )}
            <a
              href={`/projects/${project.slug}/`}
              class="mt-auto inline-block c-btn bg-accent text-background font-semibold px-5 py-2 rounded shadow hover:bg-accent-dark transition-all duration-200"
              aria-label={`View ${project.data.title}`}
            >
              View Project
            </a>
          </div>
        ))}
      </div>
      <div class="mt-8 text-center animate-fade-in">
        <a href="/projects/" class="border-2 border-accent text-accent font-semibold px-6 py-3 rounded-lg hover:bg-accent hover:text-background transition-all duration-200">View All Projects</a>
      </div>
    </section>

    <!-- Latest Blog Posts Section -->
    <section class="c-latest-blog-posts container mx-auto px-4" aria-labelledby="latest-blog-posts">
      <h2 id="latest-blog-posts" class="text-3xl font-bold mb-8 text-accent-dark animate-fade-in">Latest Blog Posts</h2>
      <ul class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Example Blog Item -->
        <li class="bg-white dark:bg-gray-900 rounded-2xl shadow-xl p-6 animate-slide-up">
          <a href="#" class="block hover:scale-105 transition-transform duration-200">
            <h3 class="text-xl font-semibold mb-2">Blog Post Title</h3>
            <time class="text-sm text-gray-500 dark:text-gray-400">May 21, 2025</time>
            <p class="mt-2 text-gray-700 dark:text-gray-300">A short excerpt or summary of the blog post goes here to entice the reader to click through and read more.</p>
          </a>
        </li>
        <!-- More blog items can be dynamically rendered here -->
      </ul>
      <div class="mt-8 text-center animate-fade-in">
        <a href="/blog/" class="bg-accent text-background font-semibold px-6 py-3 rounded-lg hover:bg-accent-dark transition-all duration-200">View All Blog Posts</a>
      </div>
    </section>

    <!-- Call-to-Action Section -->
    <section class="call-to-action container mx-auto px-4 text-center py-16 animate-fade-in">
      <div class="inline-block bg-accent-light/60 dark:bg-accent-dark/30 rounded-2xl shadow-xl px-10 py-10">
        <h2 class="text-3xl font-bold mb-4 text-accent-dark flex items-center justify-center gap-2"><span>ü§ù</span> Want to Work Together?</h2>
        <p class="text-lg mb-6 text-gray-700 dark:text-gray-300">I'm always open to exciting new opportunities and collaborations. Let's create something amazing together!</p>
        <a href="/contact/" class="bg-accent text-background font-semibold px-8 py-3 rounded-lg shadow hover:bg-accent-dark transition-all duration-200 text-lg">Contact Me</a>
      </div>
    </section>
  </main>
</Layout>
