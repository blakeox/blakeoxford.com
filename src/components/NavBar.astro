---
const navLinks = [
  { href: '/', label: 'Home', analytics: 'nav-home' },
  { href: '/about/', label: 'About', analytics: 'nav-about' },
  { href: '/projects/', label: 'Projects', analytics: 'nav-projects' },
  { href: '/blog/', label: 'Blog', analytics: 'nav-blog' },
  { href: '/contact/', label: 'Contact', analytics: 'nav-contact' },
];
---
<!-- Skip to main content for accessibility -->
<a href="#main-content" class="sr-only focus:not-sr-only absolute left-2 top-2 z-[1100] bg-accent text-background font-semibold px-4 py-2 rounded transition-colors duration-200">Skip to main content</a>
<nav class="sticky top-0 z-[1000] bg-background/95 backdrop-blur border-b border-neutral-light dark:border-neutral-dark transition-colors duration-300" aria-label="Main Navigation">
  <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-2">
    <!-- Logo -->
    <a class="flex items-center gap-2 font-heading text-xl text-foreground no-underline focus:outline-none focus:ring-2 focus:ring-accent rounded transition-colors duration-200" href="/" aria-label="Home">
      <span class="inline-flex items-center justify-center w-10 h-10 rounded-full border-2 border-foreground font-heading text-lg mr-2 bg-background">B</span>
      <span class="sr-only">Blake Oxford Portfolio</span>
    </a>
    <!-- Mobile nav toggle -->
    <button
      class="md:hidden p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-accent transition-colors duration-200"
      aria-label="Toggle navigation"
      aria-expanded="false"
      aria-controls="nav-mobile-links"
      id="nav-toggle"
      type="button"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-foreground" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
    <!-- Desktop nav links -->
    <ul class="hidden md:flex gap-6 items-center list-none m-0 p-0" id="nav-links">
      {navLinks.map(link => (
        <li>
          <a
            class="text-foreground font-medium hover:text-accent focus:text-accent transition-colors duration-200 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-accent focus:bg-accent/10 aria-[current=page]:font-bold aria-[current=page]:text-accent"
            href={link.href}
            data-analytics={link.analytics}
            aria-current={Astro.url.pathname === link.href ? 'page' : undefined}
          >
            {link.label}
          </a>
        </li>
      ))}
      <li>
        <button
          class="flex items-center justify-center p-2 rounded-full hover:bg-accent/15 focus:outline-none focus:ring-2 focus:ring-accent text-foreground transition-colors duration-200"
          aria-label="Search"
          id="search-toggle"
        >
          <svg class="w-5 h-5" aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path d="M21 21L16.65 16.65M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </li>
    </ul>
  </div>
  <!-- Mobile nav -->
  <ul class="md:hidden flex-col gap-2 px-4 pb-4 pt-2 bg-background border-b border-neutral-light dark:border-neutral-dark transition-all duration-300 hidden" id="nav-mobile-links">
    {navLinks.map(link => (
      <li>
        <a
          class="block text-foreground font-medium hover:text-accent focus:text-accent transition-colors duration-200 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-accent focus:bg-accent/10 aria-[current=page]:font-bold aria-[current=page]:text-accent"
          href={link.href}
          data-analytics={link.analytics}
          aria-current={Astro.url.pathname === link.href ? 'page' : undefined}
        >
          {link.label}
        </a>
      </li>
    ))}
    <li>
      <button
        class="flex items-center justify-center p-2 rounded-full hover:bg-accent/15 focus:outline-none focus:ring-2 focus:ring-accent text-foreground transition-colors duration-200"
        aria-label="Search"
        id="search-toggle-mobile"
      >
        <svg class="w-5 h-5" aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path d="M21 21L16.65 16.65M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </li>
  </ul>
  <script is:inline>
    document.addEventListener('DOMContentLoaded', function() {
      const navToggle = document.getElementById('nav-toggle');
      const navLinks = document.getElementById('nav-mobile-links');
      
      function closeNav() {
        navToggle.setAttribute('aria-expanded', 'false');
        navLinks.classList.add('hidden');
      }
      
      function openNav() {
        navToggle.setAttribute('aria-expanded', 'true');
        navLinks.classList.remove('hidden');
      }
      
      navToggle?.addEventListener('click', () => {
        const expanded = navToggle.getAttribute('aria-expanded') === 'true';
        if (expanded) {
          closeNav();
        } else {
          openNav();
        }
      });
      
      document.addEventListener('click', (event) => {
        if (!navLinks.contains(event.target) && !navToggle.contains(event.target)) {
          closeNav();
        }
      });
      
      document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape') {
          closeNav();
        }
      });
      
      // Highlight active link
      function highlightActiveLink() {
        const currentPath = window.location.pathname;
        navLinks.querySelectorAll('a').forEach(link => {
          const isActive = link.getAttribute('href') === currentPath;
          link.classList.toggle('font-bold', isActive);
          if (isActive) {
            link.setAttribute('aria-current', 'page');
          } else {
            link.removeAttribute('aria-current');
          }
        });
      }
      
      highlightActiveLink();
      window.addEventListener('popstate', highlightActiveLink);
    });
  </script>
</nav>
