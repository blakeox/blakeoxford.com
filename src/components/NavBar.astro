---
import ThemeToggle from './ThemeToggle';
import SearchOverlay from './SearchOverlay.astro';
---
<!-- Skip to main content for accessibility -->
<a href="#main-content" class="sr-only focus:not-sr-only absolute left-2 top-2 z-[1100] bg-accent text-background font-semibold px-4 py-2 rounded transition-colors duration-200">Skip to main content</a>
<nav class="sticky top-0 z-[1000] bg-navbar-background/95 dark:bg-navbar-backgroundDark/95 border-b border-navbar-border dark:border-navbar-borderDark backdrop-blur transition-colors duration-300 transition-transform nav-visible" aria-label="Main Navigation">
  <style>
    .nav-hidden {
      transform: translateY(-100%);
      transition: transform 0.3s ease-in-out;
    }
    
    .nav-visible {
      transform: translateY(0);
      transition: transform 0.3s ease-in-out;
    }
    
    .page-transition-enter {
      animation: fadeIn 0.3s ease-out forwards;
    }
    
    .page-transition-exit {
      animation: fadeOut 0.2s ease-in forwards;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }
  </style>
  <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-2">
    <button
      id="nav-toggle"
      type="button"
      class="text-navbar-text dark:text-navbar-textDark md:hidden p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-navbar-text dark:focus:ring-navbar-textDark transition-colors duration-200"
      aria-label="Toggle navigation"
      aria-expanded="false"
      aria-controls="nav-mobile-links"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="menu-icon w-6 h-6 text-navbar-text dark:text-navbar-textDark" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
      <svg xmlns="http://www.w3.org/2000/svg" class="close-icon hidden w-6 h-6 text-navbar-text dark:text-navbar-textDark" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
    </button>
    <a class="flex items-center gap-2 font-heading text-xl text-navbar-text dark:text-navbar-textDark no-underline focus:outline-none focus:ring-2 focus:ring-navbar-text dark:focus:ring-navbar-textDark rounded transition-colors duration-200" href="/" aria-label="Home">
      <span class="inline-flex items-center justify-center w-10 h-10 rounded-full border-2 border-accent font-heading text-lg mr-2 bg-gradient-to-br from-background to-accent/10 text-accent shadow-sm">B</span>
      <span class="sr-only">Blake Oxford Portfolio</span>
    </a>
    <ul class="hidden md:flex gap-6 items-center list-none m-0 p-0" id="nav-links">
      <!-- Nav links will be hydrated by JS -->
    </ul>
    
    <!-- Theme Toggle -->
    <div class="flex items-center">
      <!-- Search Button -->
      <button
        id="search-toggle"
        type="button" 
        class="text-navbar-text dark:text-navbar-textDark p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-navbar-text dark:focus:ring-navbar-textDark transition-colors duration-200 mr-2"
        aria-label="Toggle search"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </button>
      <ThemeToggle client:load />
    </div>
  </div>
  <ul class="md:hidden flex-col gap-2 px-4 pb-4 pt-2 bg-navbar-background dark:bg-navbar-backgroundDark border-b border-navbar-border dark:border-navbar-borderDark transition-all duration-300 hidden" id="nav-mobile-links">
    <!-- Mobile nav links will be hydrated by JS -->
  </ul>
  <script type="module" src="/assets/js/NavBarMenu.js"></script>
</nav>

<!-- Search Overlay -->
<SearchOverlay />
